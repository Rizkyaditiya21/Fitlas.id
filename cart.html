<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Keranjang Belanja</title>
<style>
body { font-family: Arial, sans-serif; padding: 20px; }
h1 { text-align: center; }
.cart-item { display: flex; justify-content: space-between; margin: 10px 0; }
button { padding: 5px 10px; cursor: pointer; }
.remove-btn { background: red; color: #fff; border: none; }
.checkout-btn { background: green; color: #fff; border: none; padding: 10px 20px; margin-top: 20px; }
</style>
</head>
<body>

<h1>Keranjang Belanja</h1>

<div id="cart-items"></div>
<h3>Total: Rp <span id="total">0</span></h3>
<button class="checkout-btn">Checkout</button>
<br><br>
<a href="index.html">⬅️ Kembali Belanja</a>

<script>
let cart = JSON.parse(localStorage.getItem('cart')) || [];

function renderCart() {
  const cartItems = document.getElementById('cart-items');
  cartItems.innerHTML = '';
  let total = 0;

  if(cart.length === 0) {
    cartItems.innerHTML = '<p>Keranjang kosong.</p>';
  }

  cart.forEach((item, index) => {
    const subtotal = item.price * item.qty;
    total += subtotal;

    const div = document.createElement('div');
    div.className = 'cart-item';
    div.innerHTML = `
      <span>${item.name} (x${item.qty}) - Rp ${subtotal}</span>
      <button class="remove-btn" data-index="${index}">Hapus</button>
    `;
    cartItems.appendChild(div);
  });

  document.getElementById('total').textContent = total;
  localStorage.setItem('cart', JSON.stringify(cart));

  document.querySelectorAll('.remove-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      const i = btn.dataset.index;
      cart.splice(i,1);
      renderCart();
    });
  });
}

document.querySelector('.checkout-btn').addEventListener('click', () => {
  if(cart.length === 0) {
    alert('Keranjang kosong!');
    return;
  }
  let summary = 'Ringkasan Pembelian:\n\n';
  let total = 0;
  cart.forEach(item => {
    summary += `${item.name} x${item.qty} - Rp ${item.price * item.qty}\n`;
    total += item.price * item.qty;
  });
  summary += `\nTotal: Rp ${total}`;
  alert(summary);
  cart = [];
  localStorage.setItem('cart', JSON.stringify(cart));
  renderCart();
});

renderCart();
</script>

</body>
</html>
